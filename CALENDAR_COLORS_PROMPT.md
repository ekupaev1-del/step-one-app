# –ü—Ä–æ–º–ø—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ —Ü–≤–µ—Ç–æ–≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

## –ó–∞–¥–∞—á–∞

–ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –¥–Ω–µ–π –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –æ—Ç—á–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–Ω—ã—Ö –∫–∞–ª–æ—Ä–∏–π –∫ –¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Ä–º–µ.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ü–≤–µ—Ç–∞–º

### üü¢ –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
- **–£—Å–ª–æ–≤–∏–µ**: –ß–µ–ª–æ–≤–µ–∫ –ø–∏—Ç–∞–µ—Ç—Å—è —Ä–æ–≤–Ω–æ (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö ¬±15% –æ—Ç –Ω–æ—Ä–º—ã)
- **–î–∏–∞–ø–∞–∑–æ–Ω**: –û—Ç 85% –¥–æ 115% –æ—Ç —Ü–µ–ª–µ–≤—ã—Ö –∫–∞–ª–æ—Ä–∏–π
- **–ü—Ä–∏–º–µ—Ä**: –ï—Å–ª–∏ –Ω–æ—Ä–º–∞ 2000 –∫–∫–∞–ª, —Ç–æ –∑–µ–ª–µ–Ω—ã–π –±—É–¥–µ—Ç –æ—Ç 1700 –¥–æ 2300 –∫–∫–∞–ª

### üî¥ –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
- **–£—Å–ª–æ–≤–∏–µ**: –ü–µ—Ä–µ–µ–¥–∞–Ω–∏–µ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 15% –æ—Ç –Ω–æ—Ä–º—ã
- **–î–∏–∞–ø–∞–∑–æ–Ω**: –ë–æ–ª—å—à–µ 115% –æ—Ç —Ü–µ–ª–µ–≤—ã—Ö –∫–∞–ª–æ—Ä–∏–π
- **–ü—Ä–∏–º–µ—Ä**: –ï—Å–ª–∏ –Ω–æ—Ä–º–∞ 2000 –∫–∫–∞–ª, —Ç–æ –∫—Ä–∞—Å–Ω—ã–π –±—É–¥–µ—Ç –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ –±–æ–ª—å—à–µ 2300 –∫–∫–∞–ª

### üü° –ñ–µ–ª—Ç—ã–π —Ü–≤–µ—Ç
- **–£—Å–ª–æ–≤–∏–µ**: –ù–µ–¥–æ–µ–¥–∞–Ω–∏–µ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 15% –æ—Ç –Ω–æ—Ä–º—ã
- **–î–∏–∞–ø–∞–∑–æ–Ω**: –ú–µ–Ω—å—à–µ 85% –æ—Ç —Ü–µ–ª–µ–≤—ã—Ö –∫–∞–ª–æ—Ä–∏–π
- **–ü—Ä–∏–º–µ—Ä**: –ï—Å–ª–∏ –Ω–æ—Ä–º–∞ 2000 –∫–∫–∞–ª, —Ç–æ –∂–µ–ª—Ç—ã–π –±—É–¥–µ—Ç –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ –º–µ–Ω—å—à–µ 1700 –∫–∫–∞–ª

### ‚ö™ –°–µ—Ä—ã–π (–±–µ–∑ —Ü–≤–µ—Ç–∞)
- **–£—Å–ª–æ–≤–∏–µ**: –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –¥–µ–Ω—å –∏–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–∞ —Ü–µ–ª–µ–≤–∞—è –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä–∏–π

## –§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

`miniapp/app/api/report/calendar/route.ts`

## –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

```typescript
function getDayStatus(actualCalories: number, targetCalories: number): "green" | "yellow" | "red" | "none"
```

## –õ–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ü–µ–ª–µ–≤—ã—Ö –∫–∞–ª–æ—Ä–∏–π (`targetCalories`)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∫–∞–ª–æ—Ä–∏–π (`actualCalories`)
3. –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç: `(actualCalories / targetCalories) * 100`
4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞:
   - –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç >= 85 –ò –ø—Ä–æ—Ü–µ–Ω—Ç <= 115 ‚Üí `"green"`
   - –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç > 115 ‚Üí `"red"`
   - –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç < 85 ‚Üí `"yellow"`
   - –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö ‚Üí `"none"`

## –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```typescript
function getDayStatus(actualCalories: number, targetCalories: number): "green" | "yellow" | "red" | "none" {
  if (!targetCalories || targetCalories <= 0) {
    return "none";
  }

  if (actualCalories <= 0) {
    return "none";
  }

  // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –Ω–æ—Ä–º—ã
  const percentage = (actualCalories / targetCalories) * 100;

  // –ó–µ–ª–µ–Ω—ã–π: –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö ¬±15% –æ—Ç –Ω–æ—Ä–º—ã (85% - 115%)
  if (percentage >= 85 && percentage <= 115) {
    return "green";
  }

  // –ö—Ä–∞—Å–Ω—ã–π: –ø–µ—Ä–µ–µ–¥–∞–Ω–∏–µ –±–æ–ª–µ–µ 15% (>115%)
  if (percentage > 115) {
    return "red";
  }

  // –ñ–µ–ª—Ç—ã–π: –Ω–µ–¥–æ–µ–¥–∞–Ω–∏–µ –±–æ–ª–µ–µ 15% (<85%)
  return "yellow";
}
```

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥ —Å 15% –Ω–∞ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10% –∏–ª–∏ 20%):

- –î–ª—è ¬±10%: –∏–∑–º–µ–Ω–∏—Ç—å `85` –Ω–∞ `90` –∏ `115` –Ω–∞ `110`
- –î–ª—è ¬±20%: –∏–∑–º–µ–Ω–∏—Ç—å `85` –Ω–∞ `80` –∏ `115` –Ω–∞ `120`

–§–æ—Ä–º—É–ª–∞:
- –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ = `100 - –ø—Ä–æ—Ü–µ–Ω—Ç_–ø–æ—Ä–æ–≥–∞`
- –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ = `100 + –ø—Ä–æ—Ü–µ–Ω—Ç_–ø–æ—Ä–æ–≥–∞`

## –°—Ç–∞—Ç—É—Å

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–º–º–∏—Ç `0c538fd`



























