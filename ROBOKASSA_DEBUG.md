# Отладка ошибки 500 в Robokassa

## Проблема
Robokassa возвращает ошибку 500 "Оплата счетов недоступна" при попытке создать платеж с Recurring=true и Receipt.

## Возможные причины

### 1. Формат Receipt
Robokassa требует строгий формат Receipt для 54-ФЗ:
- JSON должен быть компактным (без пробелов)
- Все поля обязательны
- Кодировка UTF-8

### 2. Параметр Recurring
- Для первого платежа Recurring=true может требовать специальных настроек в личном кабинете Robokassa
- Проверьте, включена ли функция рекуррентных платежей в настройках магазина

### 3. Тестовый/Боевой режим
- Убедитесь, что используете правильный URL (тестовый или боевой)
- Проверьте, что пароли (Password1, Password2) соответствуют режиму

### 4. Настройки магазина
В личном кабинете Robokassa проверьте:
- Включена ли функция "Рекуррентные платежи"
- Настроена ли фискализация (54-ФЗ)
- Правильно ли указан тип налогообложения (УСН доходы)

## Что проверить

1. **Логи Vercel** - посмотрите точный URL, который отправляется в Robokassa
2. **Личный кабинет Robokassa** - проверьте настройки рекуррентных платежей
3. **Тестовый режим** - попробуйте сначала без Receipt для проверки

## Временное решение

Если проблема в Receipt, можно временно убрать его для теста:
- Удалите параметр `Receipt` из URL
- Измените подпись: `MerchantLogin:OutSum:InvId:Password1` (без Receipt)

## Контакты поддержки

Если проблема не решается, обратитесь в поддержку Robokassa:
- Через личный кабинет → Поддержка
- Укажите InvoiceID и время запроса
