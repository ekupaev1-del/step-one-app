# üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è URL –±–æ—Ç–∞ —Å Vercel Preview

## üìã –ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤–µ—Ç–∫–∏ `dev` –Ω–∞ Vercel:

1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç preview URL –∏–∑ Vercel API
2. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç `MINIAPP_BASE_URL` –≤ `bot/src/index.ts`
3. ‚úÖ –ö–æ–º–º–∏—Ç–∏—Ç –∏ –ø—É—à–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `dev`
4. ‚úÖ –ë–æ—Ç –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π preview URL

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–∏—Ç—å Vercel Token

1. –ó–∞–π–¥–∏ –≤ [Vercel Dashboard](https://vercel.com/account/tokens)
2. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω (Settings ‚Üí Tokens)
3. –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω

### 2. –ü–æ–ª—É—á–∏—Ç—å Vercel Project ID

1. –ó–∞–π–¥–∏ –≤ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Vercel
2. Settings ‚Üí General
3. –°–∫–æ–ø–∏—Ä—É–π **Project ID** (–Ω–µ –ø—É—Ç–∞–π —Å Team ID)

### 3. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub

1. –ó–∞–π–¥–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. Settings ‚Üí Secrets and variables ‚Üí Actions
3. –î–æ–±–∞–≤—å —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

```
VERCEL_TOKEN=—Ç–≤–æ–π-vercel-token
VERCEL_PROJECT_ID=—Ç–≤–æ–π-project-id
```

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π –∏–º–µ–Ω–Ω–æ `VERCEL_PROJECT_ID`, –Ω–µ `VERCEL_PROJECT_ID_DEV`

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Vercel

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ Vercel:
- ‚úÖ Production Branch: `main`
- ‚úÖ Preview Branches: –≤–∫–ª—é—á–µ–Ω–∞ –≤–µ—Ç–∫–∞ `dev`
- ‚úÖ Root Directory: `miniapp`

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### GitHub Actions Workflow

–§–∞–π–ª `.github/workflows/sync-bot-url.yml`:

- –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏:
  - Push –≤ –≤–µ—Ç–∫—É `dev` (—Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `miniapp/**`)
  - –†—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ (workflow_dispatch)
  - –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ push)

### –°–∫—Ä–∏–ø—Ç—ã

1. **`scripts/get-vercel-preview-url.js`**
   - –ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π preview deployment –∏–∑ Vercel API
   - –ò—â–µ—Ç deployment –¥–ª—è –≤–µ—Ç–∫–∏ `dev`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç preview URL

2. **`scripts/update-bot-url.js`**
   - –û–±–Ω–æ–≤–ª—è–µ—Ç `MINIAPP_BASE_URL` –≤ `bot/src/index.ts`
   - –û–±–Ω–æ–≤–ª—è–µ—Ç fallback URL –≤ `getMainMenuKeyboard`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

1. –ó–∞–π–¥–∏ –≤ GitHub ‚Üí Actions
2. –í—ã–±–µ—Ä–∏ workflow "üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è URL –±–æ—Ç–∞ —Å Vercel Preview"
3. –ù–∞–∂–º–∏ "Run workflow" ‚Üí –≤—ã–±–µ—Ä–∏ –≤–µ—Ç–∫—É `dev` ‚Üí Run

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export VERCEL_TOKEN="—Ç–≤–æ–π-token"
export VERCEL_PROJECT_ID="—Ç–≤–æ–π-project-id"

# –ü–æ–ª—É—á–∏ preview URL
node scripts/get-vercel-preview-url.js

# –û–±–Ω–æ–≤–∏ URL –≤ –±–æ—Ç–µ (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL)
node scripts/update-bot-url.js "https://step-one-app-git-dev-xxxxxx.vercel.app"
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ö–æ–º–º–∏—Ç —Å `[skip vercel]`**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–º–∏—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `[skip vercel]` –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
   - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ deployment –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ URL

2. **–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–µ—Ç–∫–∏ `dev`**
   - Workflow —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è `dev`
   - `main` –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   - –ï—Å–ª–∏ URL —É–∂–µ –∞–∫—Ç—É–∞–ª–µ–Ω, –∫–æ–º–º–∏—Ç –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
   - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Workflow –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GitHub
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ workflow —Ñ–∞–π–ª –≤ `.github/workflows/`
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ GitHub Actions

### Preview URL –Ω–µ –Ω–∞–π–¥–µ–Ω

- –£–±–µ–¥–∏—Å—å, —á—Ç–æ deployment –¥–ª—è `dev` –∑–∞–≤–µ—Ä—à–µ–Ω (—Å—Ç–∞—Ç—É—Å READY)
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `VERCEL_PROJECT_ID` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `VERCEL_TOKEN` –≤–∞–ª–∏–¥–Ω—ã–π

### URL –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ workflow
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª `bot/src/index.ts` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç URL –≤ —Å–∫—Ä–∏–ø—Ç–µ

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. –°–¥–µ–ª–∞–π push –≤ `dev`
2. –î–æ–∂–¥–∏—Å—å –¥–µ–ø–ª–æ—è –Ω–∞ Vercel
3. –ü—Ä–æ–≤–µ—Ä—å GitHub Actions (–¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è workflow)
4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `bot/src/index.ts` –æ–±–Ω–æ–≤–ª–µ–Ω

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

- üîπ –ë–æ—Ç –í–°–ï–ì–î–ê –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π dev-–¥–µ–ø–ª–æ–π
- üîπ –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö "–Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è"
- üîπ –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö 404
- üîπ –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö —Å—Ç–∞—Ä—ã—Ö —Ñ–æ—Ä–º –∏ –º–µ–Ω—é
- üîπ Cursor —Å–∞–º –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–æ–º–µ–Ω –∫–∞–∂–¥—ã–π —Ä–∞–∑
